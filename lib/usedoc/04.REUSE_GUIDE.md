# æ¨¡å—åŒ–æ¶æ„å¤ç”¨æŒ‡å—

## ğŸ“– æ¦‚è¿°

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•åœ¨æ–°çš„é¡¹ç›®ä¸­å¤ç”¨è¿™ä¸ªæ¨¡å—åŒ–æ¶æ„çš„å„ä¸ªç»„ä»¶ã€‚è¯¥æ¶æ„é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå¤šåŒºåŸŸéƒ¨ç½²ï¼ˆä¸­å›½/å›½é™…ï¼‰ï¼Œæä¾›è®¤è¯ã€æ”¯ä»˜ã€åœ°ç†è·¯ç”±ã€æ•°æ®åº“ã€åˆè§„æ€§ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
modular-architecture/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ payment/        # æ”¯ä»˜æ¨¡å—
â”‚   â”œâ”€â”€ geo/            # åœ°ç†è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ compliance/     # åˆè§„æ¨¡å—
â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ factory.ts      # å·¥å‚å‡½æ•°
â”œâ”€â”€ __tests__/          # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ docs/              # æ–‡æ¡£
```

## ğŸ¯ é€‚ç”¨åœºæ™¯

- **å¤šåŒºåŸŸSaaSåº”ç”¨** - éœ€è¦åŒæ—¶æœåŠ¡ä¸­å›½å’Œå›½é™…ç”¨æˆ·
- **ç”µå•†å¹³å°** - éœ€è¦å¤šæ”¯ä»˜æ–¹å¼å’Œå¤šè´§å¸æ”¯æŒ
- **å†…å®¹ç®¡ç†ï¿½ï¿½ï¿½ç»Ÿ** - éœ€è¦GDPRåˆè§„å’Œåœ°ç†å†…å®¹åˆ†å‘
- **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ** - éœ€è¦å¤šè®¤è¯æä¾›å•†æ”¯æŒ
- **å…¨çƒéƒ¨ç½²çš„Webåº”ç”¨** - éœ€è¦åŒºåŸŸåŒ–çš„æ•°æ®åº“å’Œé…ç½®

## ğŸ“¦ æ¨¡å—å¤ç”¨æŒ‡å—

### 1. æ ¸å¿ƒæ¨¡å— (`src/core/`)

**ğŸ“ å¤ç”¨ä½ç½®**: ä»»ä½•é¡¹ç›®çš„åŸºç¡€åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/types/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ types.ts           # æ ¸å¿ƒç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.types.ts      # è®¤è¯ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ payment.types.ts   # æ”¯ä»˜ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ database.types.ts  # æ•°æ®åº“ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ geo.types.ts       # åœ°ç†ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ compliance.types.ts # åˆè§„ç›¸å…³ç±»å‹
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- å®šä¹‰ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹
- ç¡®ä¿æ¨¡å—é—´çš„ç±»å‹å…¼å®¹æ€§
- æä¾›ç±»å‹å®‰å…¨çš„é¡¹ç›®åŸºç¡€

**âš™ï¸ å¤ç”¨æ­¥éª¤**:
1. å¤åˆ¶æ•´ä¸ª `core/` ç›®å½•åˆ°æ–°é¡¹ç›®
2. æ ¹æ®éœ€è¦è°ƒæ•´ç±»å‹å®šä¹‰
3. æ›´æ–°å¯¼å…¥è·¯å¾„: `import { User } from '@/core/types'`

### 2. è®¤è¯æ¨¡å— (`src/auth/`)

**ğŸ“ å¤ç”¨ä½ç½®**: ç”¨æˆ·è®¤è¯ç›¸å…³åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/auth/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ adapter.ts         # è®¤è¯é€‚é…å™¨
â”‚   â”œâ”€â”€ client.ts          # å‰ç«¯è®¤è¯å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â”œâ”€â”€ supabase.ts    # Supabaseè®¤è¯å®ç°
â”‚   â”‚   â””â”€â”€ cloudbase.ts   # CloudBaseè®¤è¯å®ç°
â”‚   â””â”€â”€ __tests__/         # è®¤è¯æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- éœ€è¦æ”¯æŒå¤šä¸ªè®¤è¯æä¾›å•†çš„åº”ç”¨
- ä¸­å›½/å›½é™…åŒºåŸŸå·®å¼‚åŒ–è®¤è¯
- ç»Ÿä¸€çš„è®¤è¯APIæ¥å£

**âš™ï¸ é…ç½®è¦æ±‚**:
```bash
# Supabaseè®¤è¯
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_anon_key

# CloudBaseè®¤è¯ (ä¸­å›½)
WECHAT_CLOUDBASE_ID=your_cloudbase_id
CLOUDBASE_SECRET_ID=your_secret_id
CLOUDBASE_SECRET_KEY=your_secret_key

# å¾®ä¿¡è®¤è¯
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
```

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import { getAuth, auth } from '@/auth';

// æœåŠ¡ç«¯ä½¿ç”¨
const authInstance = getAuth(DeploymentRegion.CN);
const user = await authInstance.signInWithEmail(email, password);

// å®¢æˆ·ç«¯ä½¿ç”¨
const result = await auth.signInWithPassword({ email, password });
```

### 3. æ”¯ä»˜æ¨¡å— (`src/payment/`)

**ğŸ“ å¤ç”¨ä½ç½®**: æ”¯ä»˜å¤„ç†åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/payment/
â”œâ”€â”€ payment/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ config.ts          # æ”¯ä»˜é…ç½®
â”‚   â”œâ”€â”€ router.ts          # æ”¯ä»˜è·¯ç”±å™¨
â”‚   â”œâ”€â”€ service.ts         # æ”¯ä»˜æœåŠ¡
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ stripe.ts      # Stripeæ”¯ä»˜
â”‚   â”‚   â”œâ”€â”€ paypal.ts      # PayPalæ”¯ä»˜
â”‚   â”‚   â”œâ”€â”€ alipay.ts      # æ”¯ä»˜å®æ”¯ä»˜
â”‚   â”‚   â””â”€â”€ wechat.ts      # å¾®ä¿¡æ”¯ä»˜
â”‚   â””â”€â”€ __tests__/         # æ”¯ä»˜æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- ç”µå•†å¹³å°çš„æ”¯ä»˜å¤„ç†
- è®¢é˜…åˆ¶æœåŠ¡çš„æ”¶è´¹
- å¤šè´§å¸ã€å¤šæ”¯ä»˜æ–¹å¼æ”¯æŒ

**âš™ï¸ é…ç½®è¦æ±‚**:
```bash
# Stripeæ”¯ä»˜
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# PayPalæ”¯ä»˜
PAYPAL_CLIENT_ID=your_client_id
PAYPAL_CLIENT_SECRET=your_client_secret

# æ”¯ä»˜å®æ”¯ä»˜
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_private_key

# å¾®ä¿¡æ”¯ä»˜
WECHAT_MCH_ID=your_mch_id
WECHAT_API_KEY=your_api_key
```

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import { PaymentRouter, getPricingByMethod } from '@/payment';

// åˆ›å»ºæ”¯ä»˜è·¯ç”±å™¨
const paymentRouter = new PaymentRouter();

// è·å–å®šä»·
const pricing = getPricingByMethod('stripe', 'INTL');

// åˆ›å»ºæ”¯ä»˜è®¢å•
const order = {
  amount: 99.99,
  currency: 'USD',
  description: 'Premium subscription',
  userId: 'user123',
  planType: 'premium',
  billingCycle: 'monthly'
};

const result = await paymentRouter.createPayment(RegionType.USA, order);
```

### 4. åœ°ç†è·¯ç”±æ¨¡å— (`src/geo/`)

**ğŸ“ å¤ç”¨ä½ç½®**: åœ°ç†ä½ç½®æœåŠ¡åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/geo/
â”œâ”€â”€ geo/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ router.ts          # åœ°ç†è·¯ç”±å™¨
â”‚   â”œâ”€â”€ ip-detection.ts    # IPæ£€æµ‹å·¥å…·
â”‚   â””â”€â”€ __tests__/         # åœ°ç†æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- åŸºäºåœ°ç†ä½ç½®çš„å†…å®¹åˆ†å‘
- åŒºåŸŸåˆè§„æ€§æ£€æŸ¥
- è‡ªåŠ¨åŒºåŸŸåˆ‡æ¢
- CDNè·¯ç”±ä¼˜åŒ–

**âš™ï¸ é…ç½®è¦æ±‚**:
```bash
# åœ°ç†ä½ç½®API (å¯é€‰)
IP_API_SERVICE=your_api_service
IP_API_KEY=your_api_key
```

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import { GeoRouter, detectUserLocation } from '@/geo';

// åˆ›å»ºåœ°ç†è·¯ç”±å™¨
const geoRouter = new GeoRouter();

// æ£€æµ‹ç”¨æˆ·ä½ç½®
const result = await geoRouter.detect('8.8.8.8');
console.log(`ç”¨æˆ·åœ¨ ${result.region} åŒºåŸŸ`);

// è·å–æ¨èé…ç½®
const config = geoRouter.getRecommendedConfig(result.region);
```

### 5. æ•°æ®åº“æ¨¡å— (`src/database/`)

**ğŸ“ å¤ç”¨ä½ç½®**: æ•°æ®åº“ç®¡ç†åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/database/
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ adapter.ts         # æ•°æ®åº“é€‚é…å™¨
â”‚   â””â”€â”€ connectors/
â”‚       â”œâ”€â”€ supabase-connector.ts    # Supabaseè¿æ¥å™¨
â”‚       â”œâ”€â”€ cloudbase-connector.ts   # CloudBaseè¿æ¥å™¨
â”‚       â””â”€â”€ __tests__/                # æ•°æ®åº“æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- å¤šæ•°æ®åº“æä¾›å•†æ”¯æŒ
- åŒºåŸŸåŒ–æ•°æ®å­˜å‚¨
- æ•°æ®åº“è¿æ¥æ± ç®¡ç†
- è¿ç§»å’Œå¤‡ä»½ç­–ç•¥

**âš™ï¸ é…ç½®è¦æ±‚**:
```bash
# Supabaseæ•°æ®åº“
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_key

# CloudBaseæ•°æ®åº“
WECHAT_CLOUDBASE_ID=your_cloudbase_id
CLOUDBASE_SECRET_ID=your_secret_id
CLOUDBASE_SECRET_KEY=your_secret_key
```

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import { createDatabaseConnector, initDatabase } from '@/database';

// åˆå§‹åŒ–æ•°æ®åº“
const config = {
  type: 'supabase',
  url: process.env.SUPABASE_URL,
  anonKey: process.env.SUPABASE_ANON_KEY
};

const db = await initDatabase(config);
const client = db.getClient();

// æ‰§è¡ŒæŸ¥è¯¢
const { data, error } = await client.from('users').select('*');
```

### 6. åˆè§„æ¨¡å— (`src/compliance/`)

**ğŸ“ å¤ç”¨ä½ç½®**: åˆè§„æ€§ç®¡ç†åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/compliance/
â”œâ”€â”€ compliance/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ gdpr.ts            # GDPRåˆè§„ç®¡ç†
â”‚   â”œâ”€â”€ privacy-policy.ts  # éšç§æ”¿ç­–ç”Ÿæˆ
â”‚   â””â”€â”€ __tests__/         # åˆè§„æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- GDPRåˆè§„ç®¡ç†
- éšç§æ”¿ç­–ç”Ÿæˆ
- ç”¨æˆ·æ•°æ®å¤„ç†
- æ•°æ®ä¸»ä½“æƒåˆ©è¯·æ±‚

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import {
  GDPRComplianceManager,
  applyGDPRCompliance,
  generatePrivacyPolicy
} from '@/compliance';

// GDPRåˆè§„æ£€æŸ¥
const gdprManager = new GDPRComplianceManager({
  enableUserConsent: true,
  dataRetentionPeriod: 365,
  anonymizationEnabled: true
});

// ç”ŸæˆåŒæ„ä¹¦
const consentModal = gdprManager.generateConsentModal('en');

// ç”Ÿæˆéšç§æ”¿ç­–
const policy = generatePrivacyPolicy('en', 'DE');
```

### 7. é…ç½®ç®¡ç†æ¨¡å— (`src/config/`)

**ğŸ“ å¤ç”¨ä½ç½®**: é…ç½®ç®¡ç†åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/config/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ region.ts          # åŒºåŸŸé…ç½®
â”‚   â”œâ”€â”€ deployment.ts      # éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ __tests__/         # é…ç½®æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- å¤šåŒºåŸŸéƒ¨ç½²é…ç½®
- ç¯å¢ƒå˜é‡ç®¡ç†
- åŠŸèƒ½å¼€å…³æ§åˆ¶
- é…ç½®éªŒè¯

**âš™ï¸ ç¯å¢ƒå˜é‡**:
```bash
# éƒ¨ç½²åŒºåŸŸ
NEXT_PUBLIC_DEPLOYMENT_REGION=INTL  # æˆ– CN

# Nodeç¯å¢ƒ
NODE_ENV=production
```

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import {
  deploymentConfig,
  isChinaDeployment,
  configManager
} from '@/config';

// è·å–å½“å‰é…ç½®
console.log('å½“å‰åŒºåŸŸ:', deploymentConfig.region);

// æ£€æŸ¥éƒ¨ç½²ç±»å‹
if (isChinaDeployment()) {
  // ä¸­å›½åŒºåŸŸç‰¹å®šé€»è¾‘
}

// ç›‘å¬é…ç½®å˜åŒ–
configManager.addListener((newConfig) => {
  console.log('é…ç½®å·²æ›´æ–°:', newConfig);
});
```

### 8. å·¥å…·å‡½æ•°æ¨¡å— (`src/utils/`)

**ğŸ“ å¤ç”¨ä½ç½®**: é€šç”¨å·¥å…·åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/utils/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ error-handler.ts   # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ helpers.ts         # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ __tests__/         # å·¥å…·æ¨¡å—æµ‹è¯•
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- æ•°æ®éªŒè¯å’Œæ ¼å¼åŒ–
- é˜²æŠ–èŠ‚æµç­‰æ€§èƒ½ä¼˜åŒ–
- é€šç”¨å·¥å…·å‡½æ•°

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import {
  formatCurrency,
  debounce,
  withRetry,
  generateId
} from '@/utils';

// æ ¼å¼åŒ–è´§å¸
const price = formatCurrency(99.99, 'USD');

// é˜²æŠ–å‡½æ•°
const debouncedSearch = debounce(searchFunction, 300);

// é‡è¯•æœºåˆ¶
const result = await withRetry(apiCall, 3, 1000);

// ç”ŸæˆID
const userId = generateId('user');
```

### 9. å·¥å‚å‡½æ•°æ¨¡å— (`src/factory.ts`)

**ğŸ“ å¤ç”¨ä½ç½®**: åº”ç”¨åˆå§‹åŒ–åŒ…

```typescript
// å¤åˆ¶æ–‡ä»¶åˆ°: your-project/src/factory.ts
// æˆ–å¤åˆ¶åˆ°: your-project/src/core/factory.ts
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**:
- åº”ç”¨å¿«é€Ÿåˆå§‹åŒ–
- é¢„è®¾é…ç½®åº”ç”¨
- æ¶æ„å¥åº·æ£€æŸ¥
- æ¨¡å—é›†æˆ

**ğŸ’¡ å¤ç”¨ç¤ºä¾‹**:
```typescript
import {
  createModularArchitecture,
  quickStart,
  healthCheck
} from '@/factory';

// å¿«é€Ÿåˆ›å»ºæ¶æ„
const architecture = quickStart.china();

// å¥åº·æ£€æŸ¥
const health = await healthCheck(architecture);
if (!health.healthy) {
  console.error('æ¶æ„ä¸å¥åº·:', health.checks);
}

// ä½¿ç”¨å„ä¸ªæ¨¡å—
const user = await architecture.auth.signInWithEmail(email, password);
const location = await architecture.geo.detect(clientIP);
```

## ğŸ”§ å®Œæ•´é¡¹ç›®å¤ç”¨æŒ‡å—

### 1. é¡¹ç›®ç»“æ„å»ºè®®

```typescript
your-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/              # å¤åˆ¶ core/ ç›®å½•
â”‚   â”œâ”€â”€ auth/               # å¤åˆ¶ auth/ ç›®å½•
â”‚   â”œâ”€â”€ payment/            # å¤åˆ¶ payment/ ç›®å½•
â”‚   â”œâ”€â”€ geo/                # å¤åˆ¶ geo/ ç›®å½•
â”‚   â”œâ”€â”€ database/           # å¤åˆ¶ database/ ç›®å½•
â”‚   â”œâ”€â”€ compliance/         # å¤åˆ¶ compliance/ ç›®å½•
â”‚   â”œâ”€â”€ config/             # å¤åˆ¶ config/ ç›®å½•
â”‚   â”œâ”€â”€ utils/              # å¤åˆ¶ utils/ ç›®å½•
â”‚   â”œâ”€â”€ factory.ts          # å¤åˆ¶ factory.ts
â”‚   â””â”€â”€ app.ts              # åº”ç”¨å…¥å£
â”œâ”€â”€ __tests__/              # å¤åˆ¶æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ jest.config.js          # å¤åˆ¶ Jest é…ç½®
â””â”€â”€ package.json
```

### 2. ä¾èµ–åŒ…å®‰è£…

```bash
# æ ¸å¿ƒä¾èµ–
npm install @supabase/supabase-js @cloudbase/node-sdk

# æ”¯ä»˜ä¾èµ– (æ ¹æ®éœ€è¦)
npm install stripe paypal-rest-sdk alipay-sdk wechat-pay

# å·¥å…·ä¾èµ–
npm install jest @types/jest ts-jest

# ç±»å‹ä¾èµ–
npm install @types/node
```

### 3. ç¯å¢ƒé…ç½®

```bash
# .env.local
NEXT_PUBLIC_DEPLOYMENT_REGION=CN

# æ•°æ®åº“é…ç½®
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_key

# æ”¯ä»˜é…ç½®
STRIPE_SECRET_KEY=your_stripe_key
ALIPAY_APP_ID=your_alipay_id

# è®¤è¯é…ç½®
WECHAT_APP_ID=your_wechat_id
WECHAT_APP_SECRET=your_wechat_secret
```

### 4. åº”ç”¨åˆå§‹åŒ–ç¤ºä¾‹

```typescript
// src/app.ts
import { quickStart } from './factory';

async function initializeApp() {
  try {
    // æ ¹æ®ç¯å¢ƒé€‰æ‹©åŒºåŸŸé…ç½®
    const architecture = process.env.DEPLOYMENT_REGION === 'INTL'
      ? quickStart.international()
      : quickStart.china();

    // å¥åº·æ£€æŸ¥
    const health = await architecture.healthCheck();
    if (!health.healthy) {
      throw new Error('æ¶æ„åˆå§‹åŒ–å¤±è´¥');
    }

    console.log('âœ… åº”ç”¨åˆå§‹åŒ–æˆåŠŸ');
    return architecture;

  } catch (error) {
    console.error('âŒ åº”ç”¨åˆå§‹åŒ–å¤±è´¥:', error);
    throw error;
  }
}

export default initializeApp;
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æœ€å°å¤ç”¨ - ä»…è®¤è¯æ¨¡å—

```typescript
// å®‰è£…ä¾èµ–
npm install @supabase/supabase-js

// å¤åˆ¶æ–‡ä»¶
cp -r modular-architecture/src/core/ your-project/src/types/
cp -r modular-architecture/src/auth/ your-project/src/auth/

// ä½¿ç”¨
import { getAuth } from '@/auth';
const auth = getAuth(DeploymentRegion.CN);
```

### 2. æ ‡å‡†å¤ç”¨ - è®¤è¯+æ”¯ä»˜+æ•°æ®åº“

```typescript
// å¤åˆ¶æ ¸å¿ƒæ¨¡å—
cp -r modular-architecture/src/{core,auth,payment,database,config}/ your-project/src/

// ç¯å¢ƒé…ç½®
# å‚è€ƒ"ç¯å¢ƒé…ç½®"éƒ¨åˆ†

// ä½¿ç”¨
import { createModularArchitecture } from '@/factory';
const app = createModularArchitecture({
  region: DeploymentRegion.INTL,
  enableGDPR: true
});
```

### 3. å®Œæ•´å¤ç”¨ - å…¨æ ˆæ¶æ„

```typescript
// å¤åˆ¶æ‰€æœ‰æ¨¡å—
cp -r modular-architecture/src/ your-project/src/
cp modular-architecture/{jest.config.js,package.json} your-project/

// å®Œæ•´é…ç½®å’Œä½¿ç”¨
import { quickStart, healthCheck } from '@/factory';
const architecture = quickStart.china();
await healthCheck(architecture);
```

## ğŸ“‹ å¤ç”¨æ£€æŸ¥æ¸…å•

### âœ… å¤ç”¨å‰æ£€æŸ¥

- [ ] ç¡®è®¤ç›®æ ‡é¡¹ç›®çš„æŠ€æœ¯æ ˆå…¼å®¹æ€§
- [ ] æ£€æŸ¥ä¾èµ–åŒ…ç‰ˆæœ¬å…¼å®¹æ€§
- [ ] ç¡®è®¤ç½‘ç»œå’Œé˜²ç«å¢™é…ç½®
- [ ] å‡†å¤‡å¿…è¦çš„APIå¯†é’¥å’Œé…ç½®

### âœ… å¤ç”¨æ­¥éª¤

- [ ] å¤åˆ¶ç›¸å…³æ¨¡å—æ–‡ä»¶
- [ ] å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…
- [ ] é…ç½®ç¯å¢ƒå˜é‡
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] è¿è¡Œæµ‹è¯•éªŒè¯
- [ ] è°ƒæ•´é…ç½®é€‚é…

### âœ… å¤ç”¨åéªŒè¯

- [ ] è¿è¡Œå•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
- [ ] éªŒè¯å¤šåŒºåŸŸæ”¯æŒ
- [ ] æ£€æŸ¥æ€§èƒ½è¡¨ç°
- [ ] éƒ¨ç½²æµ‹è¯•

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥è·¯å¾„é”™è¯¯**
   ```typescript
   // é”™è¯¯
   import { User } from '../core/types';

   // æ­£ç¡®
   import { User } from '@/types';
   ```

2. **ç¯å¢ƒå˜é‡ç¼ºå¤±**
   ```bash
   # æ£€æŸ¥å¿…éœ€çš„ç¯å¢ƒå˜é‡
   npm run env:check
   ```

3. **æ¨¡å—ç‰ˆæœ¬ä¸å…¼å®¹**
   ```bash
   # æ›´æ–°ä¾èµ–
   npm update
   npm install
   ```

4. **ç½‘ç»œè¿æ¥é—®é¢˜**
   ```typescript
   // æ£€æŸ¥ç½‘ç»œè¿æ¥
   const architecture = await quickStart.china();
   const health = await healthCheck(architecture);
   ```

### è°ƒè¯•å·¥å…·

```typescript
// å¯ç”¨è°ƒè¯•æ¨¡å¼
process.env.DEBUG = 'true';

// ä½¿ç”¨å†…ç½®å¥åº·æ£€æŸ¥
import { healthCheck } from '@/factory';
const health = await healthCheck(architecture);

// æŸ¥çœ‹é…ç½®
import { deploymentConfig } from '@/config';
console.log('å½“å‰é…ç½®:', JSON.stringify(deploymentConfig, null, 2));
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨å¤ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æŸ¥çœ‹æ¨¡å—çš„å•å…ƒæµ‹è¯•äº†è§£æ­£ç¡®ç”¨æ³•
3. å‚è€ƒç¤ºä¾‹ä»£ç å’Œé…ç½®æ–‡ä»¶
4. ç¡®è®¤ç¯å¢ƒé…ç½®å’Œä¾èµ–ç‰ˆæœ¬

---

**ğŸ‰ æ­å–œï¼æ‚¨å·²ç»æŒæ¡äº†æ¨¡å—åŒ–æ¶æ„çš„å¤ç”¨æ–¹æ³•ã€‚ç°åœ¨å¯ä»¥åœ¨æ‚¨çš„é¡¹ç›®ä¸­çµæ´»ä½¿ç”¨è¿™äº›ç»è¿‡éªŒè¯çš„ç»„ä»¶äº†ï¼**